# 图灵精修旅拍版 OPEN API

图灵精修旅拍版 OPEN API 是图灵开放平台提供的对外接口，用于商家个性化接入旅拍，享受旅拍相关服务。

## 前期准备

联系商务开通旅拍 OPEN API功能, 获取 OPEN API AccessKey/SecretKey 密钥后即可对接相关接口。

说明: AccessKey简写为 AK, SecretKey简写为 SK

## 能力列表

#### **门店管理**

用于管理当前 AK 关联的门店信息

* 查询关联门店信息：获取当前 AK 关联的门店及相关门店配置信息(如门店ID, 门店名称、外部门店ID等)
* 更新关联门店信息：更新当前 AK 关联的门店信息(如外部门店ID等)

#### **订单管理**

* 创建修图订单: 用于创建修图订单，将商家需要精修的图片上传到旅拍平台 
* 查看修图订单详情: 获取修图订单详情，二销订单信息等
* 查询修图订单： 用于查询指定条件的修图订单

#### **消息推送**

在订单状态等发生改变时，旅拍服务会把最新的订单状态及相关信息发送到指定的消息推送地址, 以便于商家自己的系统能即时同步状态

* 配置消息推送地址： 配置消息推送地址，用于接收旅拍服务推送的消息
* 获取消息推送地址： 获取消息推送地址

更多能力请查看接口文档: https://github.com/pinguo/travel-photography-open-api/blob/main/open-api-doc.md
 
推送消息格式文档: https://github.com/pinguo/travel-photography-open-api/blob/main/open-api-server-notify.md

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
## 研发接口对接

* 对于所有和旅拍OPEN API交互的请求，都需要进行签名，在请求头中需要添加以下信息
* 在返回的请求头中，也会带上签名信息，调用方可以根据自己的需要进行返回数据的验签
* 同样，对于旅拍的所有消息通知请求，也会带上以下签名信息, 商家可以在自己的通知消息接收接口中进行验签

**Header内容**

* PG-Timestamp: 当前时间戳
* PG-AccessKey: AK(从商务处获取)
* PG-Sign: 签名

### 接口签名算法

* 请求数据签名: PG-Sign=hash256(请求PATH + GET参数 + POST参数 + 时间戳 + SK)
* 返回数据签名: PG-Sign=hash256(请求PATH + 返回数据 + 时间戳 + SK)

GET参数: 所有参数名进行排序后拼接

POST参数:
  * application/x-www-form-urlencoded: 与GET一样，对所有参数进行排序后拼接
  * json: 直接拼接原JSON字符串
  * multipart/form-data: 暂不支持


## SDK
* golang: https://github.com/pinguo/open-api-sdk-go
* php: https://github.com/pinguo/travel-photography-open-api/tree/main/php-sdk

